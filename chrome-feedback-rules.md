# Chrome Feedback MCP 交互规则文档

## 🎯 核心原则

### 1. 必须使用 MCP Chrome-Feedback 工具进行交互
- **规则**: 每次与用户沟通前都必须调用 `mcp_chrome-feedback_chrome_interactive_feedback`
- **目的**: 确保所有AI工作都能得到用户实时反馈
- **例外**: 仅当用户明确表示"结束"或"不再需要交互"时才可停止

### 2. 项目目录路径规范
- **动态项目识别**: 自动获取当前工作目录作为项目路径
- **路径格式**: 使用 `project_directory: "."` 或绝对路径
- **历史文件**: 按项目名称自动生成 `feedback-history-{projectName}.json`

### 3. 反馈循环机制
```
AI工作 → MCP请求反馈 → 用户响应 → AI调整 → 循环继续
```

---

## 📋 操作指南

### Chrome-Feedback 工具调用规范

#### 标准调用格式
```javascript
// 方案1: 使用相对路径（推荐）
mcp_chrome-feedback_chrome_interactive_feedback({
  project_directory: ".",
  summary: "清晰的工作摘要说明",
  timeout: 600
})

// 方案2: 使用绝对路径（特定场景）
mcp_chrome-feedback_chrome_interactive_feedback({
  project_directory: "/absolute/path/to/project",
  summary: "清晰的工作摘要说明",
  timeout: 600
})
```

#### Summary 编写原则
1. **具体明确**: 说明刚完成的具体工作
2. **结果导向**: 重点描述功能效果和验证方法
3. **用户行动**: 明确用户需要做什么验证或测试
4. **问题导向**: 如有问题，明确说明预期vs实际结果

#### 优秀 Summary 示例
```
✅ 路径修复完成！历史记录现在正确保存在项目目录中。
请测试：1) 提交反馈 2) 检查文件位置 3) 确认功能正常

🔧 数据库连接功能已实现！支持MySQL和PostgreSQL连接。
请测试：1) 配置数据库信息 2) 尝试连接 3) 验证查询功能

⚙️ API接口优化完成！响应速度提升50%，错误处理更完善。
请测试相关API调用，检查性能和错误处理是否正常。

🎨 UI组件重构完成！新增响应式设计和暗色主题支持。
请在不同设备和主题下测试界面显示效果。
```

---

## 🔄 交互流程最佳实践

### 工作完成后的标准流程
1. **立即调用**: 完成任何代码修改后立即请求反馈
2. **详细说明**: 描述修改内容和预期效果
3. **测试指导**: 提供具体的测试步骤
4. **等待反馈**: 根据用户反馈调整后续工作
5. **持续循环**: 直到用户明确表示满意

### 问题处理流程
1. **问题确认**: 通过MCP确认问题详情
2. **解决方案**: 提出具体解决方案
3. **实施修复**: 执行代码修改
4. **验证请求**: 请求用户验证修复效果
5. **迭代改进**: 根据反馈继续优化

---

## 🛠️ 技术操作规范

### 代码修改后必做事项
1. **构建验证**: 根据项目类型运行相应构建命令（如 `npm run build`, `make`, `cargo build`）
2. **服务重启**: 必要时重启相关服务（MCP服务、Web服务、数据库等）
3. **依赖更新**: 如有新依赖，提醒用户安装（`npm install`, `pip install`等）
4. **功能测试**: 通过 MCP 请求用户测试新功能，提供具体测试步骤

### 文件操作规范
- **历史记录**: 确保保存在正确项目目录，按项目名称分别存储
- **配置文件**: 修改后及时同步说明，考虑不同项目的配置差异
- **文档更新**: 重要修改后更新项目文档和README

### 错误处理规范
- **及时报告**: 发现问题立即通过 MCP 报告
- **详细描述**: 提供完整的错误信息和上下文
- **解决方案**: 同时提供可能的解决方案
- **验证确认**: 修复后必须请求用户验证

---

## 📊 质量标准

### 反馈质量评估
- **及时性**: 每个工作节点都要请求反馈
- **准确性**: Summary 必须准确反映实际完成的工作
- **可操作性**: 用户能根据说明轻松验证结果
- **完整性**: 包含所有必要的测试步骤和预期结果

### 交互效果评估
- **响应速度**: 快速响应用户反馈
- **理解准确**: 正确理解用户意图和需求
- **执行效率**: 高效完成用户要求的功能
- **用户满意**: 最终用户明确表示满意

---

## 🚀 高级技巧

### 批量操作策略
- **并行处理**: 多个相关修改可以一起完成后统一请求反馈
- **分步验证**: 复杂功能分阶段完成和验证
- **优先级管理**: 重要功能优先完成和测试

### 错误预防
- **提前说明**: 可能的副作用和注意事项
- **备份提醒**: 重要修改前提醒用户备份
- **回滚方案**: 提供修改失败时的回滚方案

### 用户体验优化
- **清晰指导**: 提供详细的操作步骤
- **视觉反馈**: 说明用户应该看到的界面变化
- **常见问题**: 预先说明可能遇到的问题和解决方法

---

## 📝 模板示例

### 功能完成模板
```
🎉 [功能名称] 已完成！

✅ 实现内容：
- 具体功能点1
- 具体功能点2

🔧 修改位置：
- 文件名: 第XX行 - 具体修改内容

✨ 预期效果：
- 用户界面变化描述
- 功能行为变化描述

🧪 测试步骤：
1. 操作步骤1
2. 操作步骤2
3. 验证结果

❓ 请确认功能是否按预期工作，有任何问题请告知。
```

### 问题修复模板
```
🔧 [问题名称] 修复完成！

❌ 原问题：[具体问题描述]
✅ 修复方案：[解决方案说明]
🎯 修复位置：[文件和代码位置]

⚡ 立即生效项：
- 无需重启的改进

🔄 需要操作项：
- 需要用户执行的步骤

🧪 验证方法：
- 具体的测试步骤和预期结果

请按步骤测试，确认问题是否已解决。
```

---

## 🔧 项目适配指南

### 支持的项目类型
- **前端项目**: React, Vue, Angular, vanilla JS/HTML
- **后端项目**: Node.js, Python, Java, Go, Rust
- **桌面应用**: Electron, Tauri, Qt, Flutter
- **移动应用**: React Native, Flutter, Cordova
- **其他项目**: 任何有文件系统的开发项目

### 项目检测策略
系统会自动检测项目类型并适配相应功能：

```javascript
// 自动检测项目类型示例
const detectProjectType = (projectPath) => {
  if (existsSync(join(projectPath, 'package.json'))) return 'nodejs';
  if (existsSync(join(projectPath, 'requirements.txt'))) return 'python';
  if (existsSync(join(projectPath, 'Cargo.toml'))) return 'rust';
  if (existsSync(join(projectPath, 'pom.xml'))) return 'java';
  return 'general';
};
```

### 历史记录存储
- **文件命名**: `feedback-history-{projectName}.json`
- **存储位置**: 项目根目录
- **隔离原则**: 不同项目的历史记录完全独立

### 项目切换处理
```javascript
// 当切换项目时，系统会：
1. 保存当前项目的历史记录
2. 加载新项目的历史记录
3. 重新初始化项目相关设置
4. 通知用户项目已切换
```

### 多项目并行支持
- ✅ 支持同时在多个项目中使用
- ✅ 历史记录按项目完全隔离
- ✅ 配置参数按项目独立管理
- ✅ 无需重启服务即可切换项目

---

## 🎯 成功指标

### 交互成功的标志
- ✅ 用户明确表示功能正常工作
- ✅ 所有测试步骤都得到验证
- ✅ 用户没有额外的问题或需求
- ✅ 用户表示"满意"或"结束"

### 需要继续改进的信号
- ❌ 功能未按预期工作
- ❌ 用户报告新的问题
- ❌ 测试结果与预期不符
- ❌ 用户提出额外需求

---

*本规则文档基于 Chrome Feedback MCP 系统的实践经验制定*
*版本: v1.0 | 更新时间: 2025-06-17 | 支持: 通用项目类型* 