# Chromeæ‰©å±•MCPåé¦ˆç³»ç»Ÿå¼€å‘è¿›åº¦æ€»ç»“

## é¡¹ç›®æ¦‚è¿°
å¼€å‘ä¸€ä¸ªåŸºäºMCP (Model Context Protocol) çš„Chromeæ‰©å±•åé¦ˆç³»ç»Ÿï¼Œè®©AIèƒ½å¤Ÿé€šè¿‡Chromeæ‰©å±•æ”¶é›†ç”¨æˆ·åé¦ˆï¼Œç‰¹åˆ«æ˜¯æ”¯æŒå›¾ç‰‡çš„å®Œæ•´ä¼ è¾“å’Œè¯†åˆ«ã€‚

## ğŸ¯ é¡¹ç›®ç›®æ ‡
è®©chrome-feedbackæ‰©å±•æ”¯æŒå›¾ç‰‡å®Œæ•´ä¼ è¾“ï¼Œä½¿AIèƒ½å¤Ÿåƒmcp-feedback-enhancedä¸€æ ·è¯†åˆ«å’Œåˆ†æå›¾ç‰‡å†…å®¹ã€‚

---

## ğŸ“‹ å·¥ä½œè¿›åº¦æ—¶é—´çº¿

### é˜¶æ®µä¸€ï¼šéœ€æ±‚åˆ†æå’Œé—®é¢˜å‘ç°
**æ—¶é—´**ï¼šåˆæœŸ
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ

**å‘ç°çš„é—®é¢˜**ï¼š
- chrome-feedbackåªèƒ½ä¼ è¾“å›¾ç‰‡å…ƒæ•°æ®ï¼ˆæ–‡ä»¶åã€å¤§å°ç­‰ï¼‰
- AIæ— æ³•çœ‹åˆ°å›¾ç‰‡çš„å®é™…å†…å®¹
- ç”¨æˆ·å¸Œæœ›chrome-feedbackå…·å¤‡ä¸mcp-feedback-enhancedç›¸åŒçš„å›¾ç‰‡è¯†åˆ«èƒ½åŠ›

**å¯¹æ¯”åˆ†æ**ï¼š
- **chrome-feedback**: åªä¼ è¾“å…ƒæ•°æ®ï¼ŒAIçœ‹ä¸åˆ°å›¾ç‰‡å†…å®¹
- **mcp-feedback-enhanced**: å®Œæ•´ä¼ è¾“å›¾ç‰‡ï¼ŒAIå¯è¯†åˆ«å†…å®¹

### é˜¶æ®µäºŒï¼šä»£ç æ¶æ„åˆ†æ
**æ—¶é—´**ï¼šä¸­æœŸ
**çŠ¶æ€**ï¼šâœ… å·²å®Œæˆ

**åˆ†æçš„ç»„ä»¶**ï¼š
1. **Chromeæ‰©å±•ç«¯** (`chrome-extension/sidepanel-new.js`)
   - å·²æ”¶é›†å®Œæ•´base64å›¾ç‰‡æ•°æ®
   - å›¾ç‰‡å¤„ç†é€»è¾‘æ­£ç¡®
   
2. **æœåŠ¡å™¨ç«¯** (`src/chrome-feedback-manager.ts`)
   - æ¥æ”¶å›¾ç‰‡æ•°æ®
   - éœ€è¦ä¿®æ”¹è¿”å›æ ¼å¼ç»™AI

3. **MCPå·¥å…·é…ç½®** (`src/index.ts`)
   - å·¥å…·æ–¹æ³•å®šä¹‰
   - éœ€è¦è§£å†³æ–¹æ³•åå†²çª

### é˜¶æ®µä¸‰ï¼šæ¶ˆæ¯è·¯ç”±å†²çªé—®é¢˜
**æ—¶é—´**ï¼šä¸­æœŸ
**çŠ¶æ€**ï¼šâœ… å·²è§£å†³

**é—®é¢˜æè¿°**ï¼š
- ç”¨æˆ·åŒæ—¶å¯ç”¨äº†ä¸¤ä¸ªMCPå·¥å…·ï¼š`mcp-feedback-enhanced` å’Œ `chrome-feedback`
- ä¸¤ä¸ªå·¥å…·éƒ½æœ‰`interactive_feedback`æ–¹æ³•
- æ¶ˆæ¯è¢«é”™è¯¯è·¯ç”±åˆ°mcp-feedback-enhancedçš„WebUI

**è§£å†³æ–¹æ¡ˆ**ï¼š
```typescript
// ä¿®æ”¹å‰ï¼ˆå†²çªï¼‰
'interactive_feedback' // ä¸¤ä¸ªå·¥å…·éƒ½æœ‰

// ä¿®æ”¹åï¼ˆé¿å…å†²çªï¼‰
'chrome_interactive_feedback' // chrome-feedbackä¸“ç”¨
'chrome_get_feedback_history'
'chrome_clear_feedback_history' 
'chrome_get_extension_status'
```

### é˜¶æ®µå››ï¼šå›¾ç‰‡ä¼ è¾“æ ¼å¼ä¼˜åŒ–
**æ—¶é—´**ï¼šå½“å‰é˜¶æ®µ
**çŠ¶æ€**ï¼šğŸ”„ è¿›è¡Œä¸­

**æ ¸å¿ƒé—®é¢˜**ï¼š
æœåŠ¡å™¨ç«¯`formatFeedbackResult`æ–¹æ³•åªè¿”å›å›¾ç‰‡å…ƒæ•°æ®ï¼Œæœªå°†å®Œæ•´å›¾ç‰‡æ•°æ®ä¼ é€’ç»™AIã€‚

**ä¿®æ”¹å†…å®¹**ï¼š

#### 4.1 æ¥å£ç±»å‹å®šä¹‰æ›´æ–°
```typescript
// src/chrome-feedback-manager.ts
export interface FeedbackData {
  id: string;
  timestamp: string;
  text: string;
  images?: Array<{
    id: string;
    name: string;
    data: string; // base64æ ¼å¼çš„å›¾ç‰‡æ•°æ®ï¼ŒåŒ…å«data:image/...å‰ç¼€
    size?: number; // æ–°å¢sizeå­—æ®µ
  }>;
  metadata?: {
    url?: string;
    title?: string;
    userAgent?: string;
  };
  source: 'chrome-extension';
}
```

#### 4.2 å›¾ç‰‡ä¼ è¾“é€»è¾‘é‡æ„
```typescript
// ä¿®æ”¹å‰ï¼šåªè¿”å›å…ƒæ•°æ®æ–‡æœ¬
private formatFeedbackResult(feedback: FeedbackData): string

// ä¿®æ”¹åï¼šè¿”å›å®Œæ•´çš„contentæ•°ç»„ï¼ŒåŒ…å«å›¾ç‰‡æ•°æ®
private formatFeedbackResult(feedback: FeedbackData): any {
  const content: any[] = [];
  
  // æ–‡æœ¬å†…å®¹
  content.push({
    type: 'text',
    text: textContent
  });
  
  // å›¾ç‰‡å†…å®¹ - å…³é”®æ”¹è¿›
  if (image.data && image.data.startsWith('data:image/')) {
    content.push({
      type: 'image',
      source: {
        type: 'base64',
        media_type: image.data.split(';')[0].split(':')[1],
        data: image.data.split(',')[1] // æå–base64æ•°æ®
      }
    });
  }
  
  return content;
}
```

#### 4.3 MCPè¿”å›æ ¼å¼è°ƒæ•´
```typescript
// è°ƒç”¨æ–¹æ³•ä¿®æ”¹
request.resolve({
  content: this.formatFeedbackResult(feedbackData) // ç›´æ¥è¿”å›contentæ•°ç»„
});
```

---

## ğŸ”§ æŠ€æœ¯å®ç°ç»†èŠ‚

### Chromeæ‰©å±•ç«¯å›¾ç‰‡å¤„ç†
- âœ… å·²æ­£ç¡®å®ç°base64å›¾ç‰‡æ”¶é›†
- âœ… æ”¯æŒä¸Šä¼ ã€ç²˜è´´ã€æˆªå›¾åŠŸèƒ½
- âœ… å›¾ç‰‡é¢„è§ˆå’Œç®¡ç†åŠŸèƒ½

### æœåŠ¡å™¨ç«¯WebSocketé€šä¿¡
- âœ… ç«¯å£8797æ­£å¸¸è¿è¡Œ
- âœ… å®¢æˆ·ç«¯ç±»å‹è¯†åˆ«æœºåˆ¶
- âœ… æ¶ˆæ¯è·¯ç”±é€»è¾‘

### MCPå·¥å…·é›†æˆ
- âœ… å·¥å…·æ–¹æ³•åå†²çªå·²è§£å†³
- ğŸ”„ ç­‰å¾…Cursoré‡æ–°åŠ è½½å·¥å…·åˆ—è¡¨

---

## ğŸš§ å½“å‰çŠ¶æ€

### å·²å®Œæˆ
1. âœ… æ¶ˆæ¯è·¯ç”±å†²çªé—®é¢˜è§£å†³
2. âœ… å›¾ç‰‡ä¼ è¾“æ ¼å¼é‡æ„
3. âœ… æ¥å£ç±»å‹å®šä¹‰æ›´æ–°
4. âœ… ä»£ç æ„å»ºæˆåŠŸ

### å¾…éªŒè¯
1. ğŸ”„ Cursor MCPå·¥å…·é‡æ–°åŠ è½½æ–°æ–¹æ³•å
2. ğŸ”„ å›¾ç‰‡å®Œæ•´ä¼ è¾“åŠŸèƒ½æµ‹è¯•
3. ğŸ”„ AIå›¾ç‰‡è¯†åˆ«èƒ½åŠ›éªŒè¯

### æµ‹è¯•æ­¥éª¤
1. åœ¨Chromeæ‰©å±•ä¸­æ·»åŠ å›¾ç‰‡
2. è¾“å…¥æµ‹è¯•æ–‡å­—å¹¶æäº¤åé¦ˆ
3. éªŒè¯AIèƒ½å¦è¯†åˆ«å›¾ç‰‡å†…å®¹

---

## ğŸ“Š é¡¹ç›®é…ç½®

### Cursor MCPé…ç½®
```json
{
  "mcpServers": {
    "mcp-feedback-enhanced": {
      "command": "uvx",
      "args": ["mcp-feedback-enhanced@latest"],
      "timeout": 600,
      "env": {
        "FORCE_WEB": "true",
        "MCP_DEBUG": "false", 
        "MCP_WEB_PORT": "8765"
      },
      "autoApprove": ["interactive_feedback"]
    },
    "chrome-feedback": {
      "command": "node",
      "timeout": 600,
      "args": ["E:\\mcp\\MCX\\build\\index.js"],
      "env": {
        "NODE_ENV": "production"
      }
    }
  }
}
```

### ç«¯å£åˆ†é…
- chrome-feedback: WebSocketç«¯å£ 8797
- mcp-feedback-enhanced: Webç«¯å£ 8765

### è¶…æ—¶æ—¶é—´é…ç½®
- **å½“å‰è®¾ç½®**: 600ç§’ (10åˆ†é’Ÿ)
- **æµ‹è¯•æ—¶é—´**: 2025-06-17 05:46:12
- **çŠ¶æ€**: âœ… æ­£å¸¸å·¥ä½œ

---

## ğŸ“ æµ‹è¯•è®°å½•

### 2025-06-17 è¶…æ—¶æ—¶é—´æµ‹è¯•
**æµ‹è¯•å†…å®¹**: å‘é€æµ‹è¯•æ¶ˆæ¯æŸ¥çœ‹è¶…æ—¶æ—¶é—´è®¾ç½®
**ç»“æœ**: 
- è¶…æ—¶æ—¶é—´: 600ç§’ (10åˆ†é’Ÿ)
- Chromeæ‰©å±•æ­£å¸¸å“åº”
- åé¦ˆç³»ç»Ÿå·¥ä½œæ­£å¸¸

**ç”¨æˆ·åé¦ˆ**: "å—¯ ç›®å‰æ¥çœ‹æ˜¯600,æ›´æ–°ä¸‹å·¥ä½œè¿›åº¦mdæ–‡ä»¶å§"

---

## ğŸ¯ ä¸‹ä¸€æ­¥è®¡åˆ’
1. ç»§ç»­æµ‹è¯•å›¾ç‰‡ä¼ è¾“åŠŸèƒ½
2. éªŒè¯AIå¯¹å›¾ç‰‡å†…å®¹çš„è¯†åˆ«èƒ½åŠ›
3. ä¼˜åŒ–ç”¨æˆ·äº¤äº’ä½“éªŒ
4. å®Œå–„é”™è¯¯å¤„ç†æœºåˆ¶

---

## ğŸ” ä¸‹ä¸€æ­¥è®¡åˆ’

1. **ç«‹å³æµ‹è¯•**ï¼šéªŒè¯å›¾ç‰‡å®Œæ•´ä¼ è¾“åŠŸèƒ½
2. **é—®é¢˜æ’æŸ¥**ï¼šå¦‚æœä»æœ‰é—®é¢˜ï¼Œæ£€æŸ¥å…·ä½“çš„æ•°æ®ä¼ è¾“æµç¨‹
3. **åŠŸèƒ½å®Œå–„**ï¼šç¡®ä¿æ‰€æœ‰å›¾ç‰‡æ ¼å¼éƒ½èƒ½æ­£ç¡®å¤„ç†
4. **æ–‡æ¡£æ›´æ–°**ï¼šå®Œå–„ä½¿ç”¨è¯´æ˜å’ŒAPIæ–‡æ¡£

---

## ğŸ“ æŠ€æœ¯è¦ç‚¹

### å…³é”®æ”¹è¿›
- **MCP Contentæ ¼å¼**ï¼šä½¿ç”¨æ ‡å‡†çš„image content type
- **Base64å¤„ç†**ï¼šæ­£ç¡®æå–MIMEç±»å‹å’Œæ•°æ®éƒ¨åˆ†
- **æ–¹æ³•åéš”ç¦»**ï¼šé¿å…å¤šå·¥å…·å†²çª

### æ¶æ„ä¼˜åŠ¿
- ä¿æŒChromeæ‰©å±•çš„ä¾¿æ·æ€§
- å®ç°ä¸mcp-feedback-enhancedç›¸åŒçš„å›¾ç‰‡è¯†åˆ«èƒ½åŠ›
- æ”¯æŒä¸¤ä¸ªç³»ç»Ÿå¹¶å­˜ä½¿ç”¨

---

*æœ€åæ›´æ–°æ—¶é—´ï¼š2024å¹´å½“å‰æ—¥æœŸ*
*çŠ¶æ€ï¼šå›¾ç‰‡ä¼ è¾“åŠŸèƒ½å¼€å‘å®Œæˆï¼Œç­‰å¾…æœ€ç»ˆæµ‹è¯•éªŒè¯* 